$(function(){function findSig(){$(".results").removeClass("hidden"),$(".not-sig, .is-sig").addClass("hidden"),$(".donut-segment").attr("stroke-dasharray","0,100").attr("stroke",""),$(".confidence").text("");var confidence,sessionA=parseInt($(".sessions-a").val()),sessionB=parseInt($(".sessions-b").val()),sessionTotal=sessionA+sessionB,conversionA=parseInt($(".conversions-a").val()),conversionB=parseInt($(".conversions-b").val()),conversionTotal=conversionA+conversionB,conversionRateA=conversionA/sessionA,conversionRateB=conversionB/sessionB,expectedConversionA=conversionTotal*sessionA/sessionTotal,expectedConversionB=conversionTotal*sessionB/sessionTotal,differenceA=conversionA-expectedConversionA,chiSq=Math.pow(differenceA,2)/expectedConversionA+Math.pow(differenceA,2)/expectedConversionB,sig20=1.642,sig10=2.706,sig5=3.841;chiSq>sig5?(confidence=95,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke-dasharray",confidence+",100").attr("stroke","#26a65b")):chiSq>sig10?(confidence=90,confidenceDiff=100-confidence,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke-dasharray",confidence+",100").attr("stroke","#e65722")):chiSq>sig20?(confidence=80,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke-dasharray",confidence+",100").attr("stroke","#dc2a2a")):($(".not-sig").removeClass("hidden"),$(".sig-chart").addClass("hidden")),$(".rate-a").text((100*conversionRateA).toFixed(2)+"%"),$(".rate-b").text((100*conversionRateB).toFixed(2)+"%");var lift=100*(conversionRateB/conversionRateA-1);$(".lift").text(lift.toFixed(2)+"%"),lift>0?($(".lift").addClass("pos"),$(".lift").removeClass("neg")):($(".lift").removeClass("pos"),$(".lift").addClass("neg")),conversionRateA>conversionRateB&&chiSq>sig20?($(".col-container").removeClass("winner"),$(".col-a").addClass("winner")):conversionRateB>conversionRateA&&chiSq>sig20?($(".col-container").removeClass("winner"),$(".col-b").addClass("winner")):$(".col-container").removeClass("winner"),$(".url-params").val("https://edcupaioli.com/ab-test-calculator/?sessionA="+sessionA+"&sessionB="+sessionB+"&conversionA="+conversionA+"&conversionB="+conversionB)}function getParameterByName(name,url){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}$("#calc-form").submit(function(e){e.preventDefault(),findSig()}),$(".copy-btn").click(function(){$(".url-params").select(),document.execCommand("Copy")}),window.location.href.indexOf("?sessionA")>-1&&($(".sessions-a").val(getParameterByName("sessionA")),$(".sessions-b").val(getParameterByName("sessionB")),$(".conversions-a").val(getParameterByName("conversionA")),$(".conversions-b").val(getParameterByName("conversionB")),findSig())});