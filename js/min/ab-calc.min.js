$(function(){function findSig(){$(".not-sig, .is-sig").addClass("hidden"),$(".donut-segment").attr("stroke-dasharray","0,100").attr("stroke",""),$(".confidence").text("");var confidence,sessionA=parseInt($(".sessions-a").val()),sessionB=parseInt($(".sessions-b").val()),sessionTotal=sessionA+sessionB,conversionA=parseInt($(".conversions-a").val()),conversionB=parseInt($(".conversions-b").val()),conversionTotal=conversionA+conversionB,conversionRateA=conversionA/sessionA,conversionRateB=conversionB/sessionB,expectedConversionA=conversionTotal*sessionA/sessionTotal,expectedConversionB=conversionTotal*sessionB/sessionTotal,differenceA=conversionA-expectedConversionA,chiSq=Math.pow(differenceA,2)/expectedConversionA+Math.pow(differenceA,2)/expectedConversionB;6.635<chiSq.toFixed(3)?(confidence=99,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke","#26a65b")):5.412<chiSq.toFixed(3)?(confidence=98,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke","#26a65b")):3.841<chiSq.toFixed(3)?(confidence=95,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke","#26a65b")):2.706<chiSq.toFixed(3)?(confidenceDiff=100-(confidence=90),$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke","#e65722")):1.642<chiSq.toFixed(3)?(confidence=80,$(".is-sig,.sig-chart").removeClass("hidden"),$(".confidence").text(confidence+"%"),$(".donut-segment").attr("stroke","#dc2a2a")):($(".not-sig").removeClass("hidden"),$(".sig-chart").addClass("hidden")),setTimeout(function(){$(".donut-segment").attr("stroke-dasharray",confidence+",100")},200),$("html,body").animate({scrollTop:$("#results-section").offset().top},300),$(".rate-a").text((100*conversionRateA).toFixed(2)+"%"),$(".rate-b").text((100*conversionRateB).toFixed(2)+"%");var lift=100*(conversionRateB/conversionRateA-1);$(".lift-amt").text(lift.toFixed(2)+"%"),0<lift?($(".lift-amt").addClass("pos"),$(".lift-amt").removeClass("neg")):($(".lift-amt").removeClass("pos"),$(".lift-amt").addClass("neg")),conversionRateB<conversionRateA&&1.642<chiSq?($(".col-container").removeClass("winner"),$(".col-a").addClass("winner")):conversionRateA<conversionRateB&&1.642<chiSq?($(".col-container").removeClass("winner"),$(".col-b").addClass("winner")):$(".col-container").removeClass("winner"),$(".url-params").val("https://edcupaioli.com/ab-test-calculator/?sessionA="+sessionA+"&sessionB="+sessionB+"&conversionA="+conversionA+"&conversionB="+conversionB),$(".results").removeClass("hidden")}function getParameterByName(name,url){url=url||window.location.href,name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null}$("#calc-form").submit(function(e){e.preventDefault(),findSig()}),$(".copy-btn").click(function(){$(".url-params").select(),document.execCommand("Copy"),$(".copy-confirm").addClass("active"),setTimeout(function(){$(".copy-confirm").removeClass("active")},1e3)}),-1<window.location.href.indexOf("?sessionA")&&($(".sessions-a").val(getParameterByName("sessionA")),$(".sessions-b").val(getParameterByName("sessionB")),$(".conversions-a").val(getParameterByName("conversionA")),$(".conversions-b").val(getParameterByName("conversionB")),findSig())});