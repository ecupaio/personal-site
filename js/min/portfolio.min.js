const selectedProject=document.querySelectorAll(".project-col"),projectOverlay=document.querySelector(".project-overlay"),projectSwiper=document.querySelector(".swiper-wrapper");let swiper;function closeOverlay(){projectSwiper.innerHTML="",projectOverlay.classList.remove("active"),document.documentElement.classList.remove("active"),swiper.destroy(!0,!0)}selectedProject.forEach(item=>{item.addEventListener("click",event=>{const projectTitle=event.currentTarget.querySelector(".project-title").innerText;document.querySelector(".selected-title").innerHTML=projectTitle,fetch("/projects.json").then(response=>response.json()).then(projects=>{const project=projects.find(({title:title})=>title===projectTitle),projectImages=project.images,projectLink=project.link,projectText=decodeURI(project.text),projectTech=project.tech;var html,txt;let imageHeight;document.querySelector(".selected-tech").innerHTML=projectTech,document.querySelector(".about-project").innerHTML=(html=projectText,(txt=document.createElement("textarea")).innerHTML=html,txt.value),projectLink.length>0?(document.querySelector(".selected-link").setAttribute("href",projectLink),document.querySelector(".selected-link").classList.remove("hidden")):(document.querySelector(".selected-link").setAttribute("href","#"),document.querySelector(".selected-link").classList.add("hidden")),projectImages.forEach(image=>{const projectSlide='<div class="swiper-slide"><img class="project-image" src="/images/'+image+'" />';projectSwiper.insertAdjacentHTML("beforeend",projectSlide)}),swiper=new Swiper(".swiper",{slidesPerView:1,spaceBetween:32,loop:!0,paginationClickable:!0,autoHeight:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},breakpoints:{568:{autoHeight:!1}}}),document.documentElement.classList.add("active"),projectOverlay.classList.add("active");document.querySelector(".scroller");function scrollerDisplay(){imageHeight&&imageHeight>520?document.querySelector(".scroller").classList.add("active"):document.querySelector(".scroller").classList.remove("active")}swiper.on("transitionEnd",(function(){imageHeight=document.querySelector('[data-swiper-slide-index="'+swiper.realIndex+'"] .project-image').height,scrollerDisplay()})),swiper.on("imagesReady",(function(){imageHeight=document.querySelector('[data-swiper-slide-index="0"] .project-image').height,scrollerDisplay()}));document.querySelectorAll(".swiper-slide").forEach(item=>{item.addEventListener("scroll",event=>{item.scrollTop>0?document.querySelector(".scroller").classList.remove("active"):document.querySelector(".scroller").classList.add("active")})})}).catch(err=>console.log(err))})}),document.querySelector(".close-project-overlay").onclick=event=>{closeOverlay()},window.onclick=event=>{event.target===document.querySelector(".project-overlay")&&closeOverlay()},document.querySelector(".load-more-projects").addEventListener("click",event=>{event.preventDefault();const hiddenProjects=document.querySelectorAll(".project-col.hidden");hiddenProjects.forEach((element,index)=>{index<=8&&element.classList.remove("hidden")});const offsetTop=window.scrollY+hiddenProjects[0].getBoundingClientRect().top;scroll({top:offsetTop,behavior:"smooth"}),console.log(hiddenProjects.length),hiddenProjects.length<9&&document.querySelector(".load-more-projects").classList.add("hidden")});